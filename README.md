# JSON Simple Editor

JSONファイルをGUIで直感的に閲覧・編集できる Windows デスクトップアプリケーションです。

---

## 動作環境

- OS: Windows 11
- ランタイム: .NET 9.0 以降
- 依存ライブラリ: Newtonsoft.Json（同梱）

---

## セットアップ

1. ZIPファイルを任意のフォルダに展開します。

2. `config.txt` を開き、編集したい JSON ファイルのフルパスを記載して保存します。

```
C:\data\settings.json
```

> `config.txt` の文字コードは **Shift-JIS** です。パスに日本語が含まれる場合はご注意ください。

3. `JsonSimpleEditor.exe` を起動します。

---

## 画面構成

```
┌─────────────────┬───────────────────────────────┐
│  ツリービュー    │  操作パネル　                  │
│  （左ペイン）    │  （右ペイン）                  |
└─────────────────┴───────────────────────────────┘
```

| ペイン       | 説明                                                                                   |
|--------------|----------------------------------------------------------------------------------------|
| ツリービュー | JSONの階層構造をツリー形式で表示。ノードをクリックすると操作パネルが切り替わります。   |
| 操作パネル   | 選択したノードの種類（Dictionary / 値配列 / オブジェクト配列）に応じたUIを表示します。 |

---

## 機能一覧

### ファイル操作

| 操作               | 説明                                                                |
|--------------------|---------------------------------------------------------------------|
| 起動時自動読み込み | `config.txt` に記載されたJSONファイルを起動時に自動で読み込みます。 |
| ファイルを開く     | メニューから別のJSONファイルを開けます。                            |
| 名前を付けて保存   | 編集内容を任意のパスにJSONファイルとして保存します。                |

---

### Dictionary（オブジェクト）操作

ツリーでオブジェクトノードを選択すると、キーと値の一覧をDataGridViewで表示します。

| 機能           | 操作方法                                                           |
|----------------|--------------------------------------------------------------------|
| 値の編集       | 値列のセルを選択して **F2** キーで編集開始                         |
| 型の変更       | 型列のコンボボックスから String / Integer / Float / Boolean を選択 |
| キー名の変更   | キー列のセルを **F2** で編集                                       |
| 子ノードへ移動 | 列を選択してダブルクリック                                         |
| エントリ追加   | 下部の入力欄にキー・値・型を入力して「追加」ボタン                 |
| エントリ削除   | 行を選択して「選択行を削除」ボタン                                 |
| エントリコピー | 行を選択して「選択行をコピー」ボタン（`_copy` サフィックスで複製） |
| 行の並べ替え   | ↑↓ボタン、またはドラッグ＆ドロップ                               |

> 型変換に失敗した場合（例：`"abc"` → Integer）はエラーメッセージを表示し、変更を元に戻します。

---

### 値配列操作

ツリーで値配列ノード（Integer / Float / String / Boolean の配列）を選択すると DataGridView で一覧表示します。

| 機能                    | 操作方法                                     |
|-------------------------|----------------------------------------------|
| 値の編集                | 値列を **F2** で編集                         |
| 型の変更                | 型列のコンボボックスから変更                 |
| 子ノードへ移動          | 列を選択してダブルクリック                   |
| 値の追加（DGV直接入力） | 末尾の空行（`*` 行）に値を入力して **Enter** |
| 値の追加（パネル入力）  | 下部の入力欄に値を入力して「値を追加」ボタン |
| 行の削除                | 行を選択して「選択行を削除」ボタン           |
| 行の並べ替え            | ↑↓ボタン、またはドラッグ＆ドロップ         |

---

### オブジェクト配列操作

ツリーでオブジェクト配列ノードを選択すると、要素の一覧をDataGridViewで表示します。
列はオブジェクトの先頭要素のプロパティキーから自動生成されます。

| 機能             | 操作方法                                     |
|------------------|----------------------------------------------|
| 子ノードへ移動   | 列を選択してダブルクリック                   |
| 要素のコピー追加 | 行を選択して「選択行をコピーして追加」ボタン |
| 要素の削除       | 行を選択して「選択行を削除」ボタン           |
| 行の並べ替え     | ↑↓ボタン、またはドラッグ＆ドロップ         |

---

## 注意事項

- 編集内容はメモリ上にのみ保持されます。**保存操作を行わないとファイルには反映されません。**
- 型変換は現在の値との整合性をチェックします。変換できない場合は変更が取り消されます。
- `config.txt` に記載されたパスのJSONファイルが存在しない場合、起動時にエラーが表示されます。

---

## ライセンス

本ソフトウェアの利用にあたっては、同梱の `LICENSE.txt` をお読みください。
